{"version":3,"file":"index.7c2a5e96.js","sources":["../../vite/modulepreload-polyfill","../../src/index.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\n\nconst pricingData = [\n  { views: 1e4, price: 8 },\n  { views: 5e4, price: 12 },\n  { views: 1e5, price: 16 },\n  { views: 5e5, price: 24 },\n  { views: 1e6, price: 36 },\n];\n/** Yearly discount in percent */\nconst discount = 25;\n\nconst sliderPositionMin = 0;\nconst sliderPositionMax = pricingData.length - 1;\n\nconst $pricingWidget = document.getElementById('pricing-widget');\nconst $slider = $pricingWidget.querySelector('.slider');\nconst $bar = $pricingWidget.querySelector('.slider__bar');\nconst $thumb = $pricingWidget.querySelector('.slider__thumb');\nconst $views = $pricingWidget.querySelector('.pricing__views');\nconst $value = $pricingWidget.querySelector('.pricing__value');\nconst $switch = $pricingWidget.querySelector('.switch__checkbox');\n\n/**\n * Calculates the slider's thumb position, taking into account that the thumb moves within a range of the bar width minus the thumb width.\n * @arg {number} offset X coordinate relative to the left edge of the slider\n */\nconst getSliderPosition = (offset) =>\n  Math.round(\n    ((offset - $thumb.clientWidth / 2) /\n      ($bar.clientWidth - $thumb.clientWidth)) *\n      sliderPositionMax,\n  );\n\nconst priceFormatter = new Intl.NumberFormat('en', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 2,\n});\n\nconst viewsFormatter = new Intl.NumberFormat('en', {\n  notation: 'compact',\n});\n\n/** @arg {{ sliderPosition: number, yearlyBilling: boolean }} state */\nconst render = ({ sliderPosition, yearlyBilling }) => {\n  const { price, views } = pricingData[sliderPosition];\n  const viewsText = viewsFormatter.format(views).concat(' pageviews');\n\n  $views.textContent = viewsText;\n  $value.textContent = priceFormatter.format(\n    price * (yearlyBilling ? 1 - discount / 100 : 1),\n  );\n\n  $slider.style.setProperty('--position', sliderPosition);\n  $thumb.setAttribute('aria-valuenow', views);\n  $thumb.setAttribute('aria-valuetext', viewsText);\n  $switch.setAttribute('aria-checked', yearlyBilling);\n};\n\nconst state = new Proxy(\n  Object.seal({\n    sliderPosition: Math.floor(sliderPositionMax / 2),\n    yearlyBilling: false,\n  }),\n  {\n    set: (container, prop, value, proxy) => {\n      switch (prop) {\n        case 'sliderPosition': {\n          const position = Math.min(\n            Math.max(value, sliderPositionMin),\n            sliderPositionMax,\n          );\n          if (container[prop] !== position) {\n            container[prop] = position;\n            render(proxy);\n          }\n          break;\n        }\n\n        case 'yearlyBilling': {\n          if (container[prop] !== value) {\n            container[prop] = value;\n            render(proxy);\n          }\n          break;\n        }\n\n        // no default\n      }\n\n      return true;\n    },\n  },\n);\n\n/** @arg {KeyboardEvent} event */\nconst handleSliderKeyDown = (event) => {\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowDown':\n      state.sliderPosition -= 1;\n      break;\n    case 'ArrowRight':\n    case 'ArrowUp':\n      state.sliderPosition += 1;\n      break;\n    case 'Home':\n      state.sliderPosition = sliderPositionMin;\n      break;\n    case 'End':\n      state.sliderPosition = sliderPositionMax;\n      break;\n    case 'PageUp':\n      state.sliderPosition += 2;\n      break;\n    case 'PageDown':\n      state.sliderPosition -= 2;\n      break;\n    default:\n      break;\n  }\n};\n\nconst handleSliderDrag = (e) => {\n  e.preventDefault();\n  e.stopPropagation();\n  $thumb.focus();\n  document.body.classList.add('dragging');\n\n  /** @arg {MouseEvent | TouchEvent} event */\n  const handleMouseMove = (event) => {\n    const { pageX } = event instanceof MouseEvent ? event : event.touches[0];\n    const { left } = $bar.getBoundingClientRect();\n    state.sliderPosition = getSliderPosition(pageX - left);\n  };\n\n  const handleMouseUp = () => {\n    document.body.classList.remove('dragging');\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('touchmove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    document.removeEventListener('touchend', handleMouseUp);\n  };\n\n  document.addEventListener('mousemove', handleMouseMove);\n  document.addEventListener('touchmove', handleMouseMove);\n  document.addEventListener('mouseup', handleMouseUp);\n  document.addEventListener('touchend', handleMouseUp);\n};\n\n/** @arg {MouseEvent} event */\nconst handleSliderClick = ({ offsetX }) => {\n  $thumb.focus();\n  state.sliderPosition = getSliderPosition(offsetX);\n};\n\n/** @arg {Event} event */\nconst handleSwitchChange = (event) => {\n  state.yearlyBilling = event.currentTarget.checked;\n};\n\n$thumb.addEventListener('keydown', handleSliderKeyDown);\n$thumb.addEventListener('mousedown', handleSliderDrag);\n$thumb.addEventListener('touchstart', handleSliderDrag);\n$bar.addEventListener('click', handleSliderClick);\n$switch.addEventListener('change', handleSwitchChange);\n"],"names":[],"mappings":"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"}