!function(){const e=document.querySelector.bind(document),t=document.querySelectorAll.bind(document),a=(e,t)=>new Promise((a=>{const n=()=>{e.classList.remove(t),e.removeEventListener("animationend",n),a(e)};e.classList.add(t),e.addEventListener("animationend",n)})),n=(e=0)=>new Promise((t=>{setTimeout(t,e)})),s=e=>{e.classList.toggle("hidden")};var o=e,i=a,l=s;const c=o(".overlay"),r=o(".rules"),d=o(".modal > button"),m=e=>{e.stopPropagation();const{target:t}=e;(t===c||d.contains(t))&&i(c,"fadeOut").then(l)};d.addEventListener("click",m,!0),c.addEventListener("click",m,!0),r.addEventListener("click",(()=>{l(c),i(c,"fadeIn")}));const u=e(".playfield"),h=e(".result"),p=e(".result > .col:nth-child(1) > .box"),f=e(".result > .col:nth-child(2) > .box"),g=e(".status"),w=e(".score > div:nth-child(2)"),b=e(".center"),v=(e=>{try{return localStorage.getItem(e)}catch(e){if(e instanceof DOMException&&e.message.includes("localStorage"))return null;throw e}})("score");null===v&&console.warn("The score won't be saved between sessions as third party cookies are disabled in your browser.");let L=Number(v)||0,E=!1;w.textContent=L;const x=t=>{const a=document.createElement("div");a.classList.add("option",t);const n=e(`button.option.${t} > span`).cloneNode(!0);return a.append(n),a},y=[{name:"Scissors",beats:[1,3]},{name:"Paper",beats:[2,4]},{name:"Rock",beats:[3,0]},{name:"Lizard",beats:[4,1]},{name:"Spock",beats:[0,2]}].map((e=>({...e,$element:x(e.name.toLowerCase())}))),k=({currentTarget:e})=>{if(E)return;E=!0;const t=e.getAttribute("aria-label"),o=y.findIndex((({name:e})=>e===t)),i=((e=0,t=1)=>Math.floor(e+Math.random()*(t-e)))(0,y.length-1),l=y.map(((e,t)=>t)).filter(((e,t)=>t!==o))[i],c=y[o].beats.includes(l);L+=c?1:-1,((e,t)=>{try{localStorage.setItem(e,t)}catch(e){if(e instanceof DOMException&&e.message.includes("localStorage"))return!1;throw e}})("score",L),(async(e,t,o)=>{p.append(y[e].$element),await a(u,"fadeOut"),s(u),await n(300),s(h),await a(h,"fadeIn"),await n(800),f.append(y[t].$element),await a(y[t].$element,"flip"),await n(500),(o?p:f).classList.add("highlight"),await n(1e3),g.textContent=o?"You win":"You lose",h.classList.add("expanded"),await a(b,"expand"),a(w,"flip-scale"),await n(300),w.textContent=L})(o,l,c)};t(".playfield .option").forEach((e=>{e.addEventListener("click",k)})),e(".repeat").addEventListener("click",(async()=>{E&&(E=!1,await a(h,"fadeOut"),s(h),s(u),a(u,"fadeIn"),e(".highlight").classList.remove("highlight"),h.classList.remove("expanded"),p.removeChild(p.lastElementChild),f.removeChild(f.lastElementChild),E=!1)}))}();
//# sourceMappingURL=index.02c04bf2.js.map
