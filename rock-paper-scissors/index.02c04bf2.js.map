{"mappings":"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","sources":["projects/rock-paper-scissors/src/js/_utils.js","projects/rock-paper-scissors/src/js/_modal.js","projects/rock-paper-scissors/src/js/script.js"],"sourcesContent":["export const $ = document.querySelector.bind(document);\n\nexport const $$ = document.querySelectorAll.bind(document);\n\nexport const animate = ($el, animation) =>\n  new Promise((resolve) => {\n    const removeAnimation = () => {\n      $el.classList.remove(animation);\n      $el.removeEventListener('animationend', removeAnimation);\n      resolve($el);\n    };\n\n    $el.classList.add(animation);\n    $el.addEventListener('animationend', removeAnimation);\n  });\n\nexport const delay = (duration = 0) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, duration);\n  });\n\nexport const toggleDisplay = ($el) => {\n  $el.classList.toggle('hidden');\n};\n\nexport const genRandomNum = (min = 0, max = 1) =>\n  Math.floor(min + Math.random() * (max - min));\n\nexport const getSavedItem = (key) => {\n  try {\n    return localStorage.getItem(key);\n  } catch (err) {\n    if (err instanceof DOMException && err.message.includes('localStorage'))\n      return null;\n    throw err;\n  }\n};\n\nexport const saveItem = (key, value) => {\n  try {\n    localStorage.setItem(key, value);\n    return true;\n  } catch (err) {\n    if (err instanceof DOMException && err.message.includes('localStorage'))\n      return false;\n    throw err;\n  }\n};\n","const { $, animate, toggleDisplay } = require('./_utils');\n\nconst $overlay = $('.overlay');\nconst $rulesBtn = $('.rules');\nconst $closeModalBtn = $('.modal > button');\n\nconst hideModal = (event) => {\n  event.stopPropagation();\n  const { target } = event;\n\n  if (target === $overlay || $closeModalBtn.contains(target)) {\n    animate($overlay, 'fadeOut').then(toggleDisplay);\n  }\n};\n\nconst showModal = () => {\n  toggleDisplay($overlay);\n  animate($overlay, 'fadeIn');\n};\n\n$closeModalBtn.addEventListener('click', hideModal, true);\n$overlay.addEventListener('click', hideModal, true);\n$rulesBtn.addEventListener('click', showModal);\n","import './_modal';\nimport {\n  $,\n  $$,\n  animate,\n  delay,\n  toggleDisplay,\n  genRandomNum,\n  getSavedItem,\n  saveItem,\n} from './_utils';\n\nconst $playField = $('.playfield');\nconst $result = $('.result');\nconst $leftCol = $('.result > .col:nth-child(1) > .box');\nconst $rightCol = $('.result > .col:nth-child(2) > .box');\nconst $status = $('.status');\nconst $score = $('.score > div:nth-child(2)');\nconst $center = $('.center');\n\nconst savedScore = getSavedItem('score');\nif (savedScore === null)\n  // eslint-disable-next-line no-console\n  console.warn(\n    \"The score won't be saved between sessions as third party cookies are disabled in your browser.\",\n  );\n\nlet score = Number(savedScore) || 0;\nlet isGameInProgress = false;\n\n$score.textContent = score;\n\nconst newOptionElement = (className) => {\n  const $option = document.createElement('div');\n  $option.classList.add('option', className);\n\n  const $spanWithIcon = $(`button.option.${className} > span`).cloneNode(true);\n  $option.append($spanWithIcon);\n\n  return $option;\n};\n\n// 'beats' contains indexes of the options\nconst options = [\n  { name: 'Scissors', beats: [1, 3] },\n  { name: 'Paper', beats: [2, 4] },\n  { name: 'Rock', beats: [3, 0] },\n  { name: 'Lizard', beats: [4, 1] },\n  { name: 'Spock', beats: [0, 2] },\n].map((opt) => ({\n  ...opt,\n  $element: newOptionElement(opt.name.toLowerCase()),\n}));\n\nconst render = async (playerPick, housePick, isPlayerWon) => {\n  $leftCol.append(options[playerPick].$element);\n  await animate($playField, 'fadeOut');\n  toggleDisplay($playField);\n  await delay(300);\n\n  toggleDisplay($result);\n  await animate($result, 'fadeIn');\n  await delay(800);\n\n  $rightCol.append(options[housePick].$element);\n  await animate(options[housePick].$element, 'flip');\n  await delay(500);\n\n  (isPlayerWon ? $leftCol : $rightCol).classList.add('highlight');\n  await delay(1000);\n\n  $status.textContent = isPlayerWon ? 'You win' : 'You lose';\n  $result.classList.add('expanded');\n  await animate($center, 'expand');\n\n  animate($score, 'flip-scale');\n  await delay(300);\n  $score.textContent = score;\n};\n\nconst play = ({ currentTarget }) => {\n  if (isGameInProgress) return;\n  isGameInProgress = true;\n\n  const clickedOptName = currentTarget.getAttribute('aria-label');\n  const playerPick = options.findIndex(({ name }) => name === clickedOptName);\n\n  const random = genRandomNum(0, options.length - 1);\n  const housePick = options\n    .map((_, i) => i) // saving initial indexes\n    // filtering out the option already picked by a player\n    // & picking a random option from the rest\n    .filter((_, i) => i !== playerPick)[random];\n\n  const isPlayerWon = options[playerPick].beats.includes(housePick);\n\n  score += isPlayerWon ? 1 : -1;\n  saveItem('score', score);\n\n  render(playerPick, housePick, isPlayerWon);\n};\n\nconst newRound = async () => {\n  if (!isGameInProgress) return;\n  isGameInProgress = false;\n\n  await animate($result, 'fadeOut');\n  toggleDisplay($result);\n\n  toggleDisplay($playField);\n  animate($playField, 'fadeIn');\n\n  $('.highlight').classList.remove('highlight');\n\n  $result.classList.remove('expanded');\n\n  $leftCol.removeChild($leftCol.lastElementChild);\n  $rightCol.removeChild($rightCol.lastElementChild);\n\n  isGameInProgress = false;\n};\n\n$$('.playfield .option').forEach(($option) => {\n  $option.addEventListener('click', play);\n});\n\n$('.repeat').addEventListener('click', newRound);\n"],"names":["$8341ebaee911c4c3$export$3d8c2f653ac9d0b9","document","querySelector","bind","$8341ebaee911c4c3$export$fe324b23443c13e2","querySelectorAll","$8341ebaee911c4c3$export$e3607ec2d7a891c4","$el","animation","Promise","resolve","removeAnimation","classList","remove","removeEventListener","add","addEventListener","$8341ebaee911c4c3$export$1391212d75b2ee65","duration","setTimeout","$8341ebaee911c4c3$export$f0e9d14ede4c01bd","toggle","$c58f1634328bba97$var$$overlay","$c58f1634328bba97$require$$","$c58f1634328bba97$var$$rulesBtn","$c58f1634328bba97$var$$closeModalBtn","$c58f1634328bba97$var$hideModal","event","stopPropagation","target","contains","$c58f1634328bba97$require$animate","then","$c58f1634328bba97$require$toggleDisplay","$590612250976277f$var$$playField","$590612250976277f$var$$result","$590612250976277f$var$$leftCol","$590612250976277f$var$$rightCol","$590612250976277f$var$$status","$590612250976277f$var$$score","$590612250976277f$var$$center","$590612250976277f$var$savedScore","key","localStorage","getItem","err","DOMException","message","includes","$8341ebaee911c4c3$export$e257920db3bb8207","console","warn","$590612250976277f$var$score","Number","$590612250976277f$var$isGameInProgress","textContent","$590612250976277f$var$newOptionElement","className","$option","createElement","$spanWithIcon","cloneNode","append","$590612250976277f$var$options","name","beats","map","opt","$element","toLowerCase","$590612250976277f$var$play","currentTarget","clickedOptName","getAttribute","playerPick","findIndex","random","min","max","Math","floor","$8341ebaee911c4c3$export$57c09c3a3e25bb62","length","housePick","_","i","filter","isPlayerWon","value","setItem","$8341ebaee911c4c3$export$488773977679fb92","async","$590612250976277f$var$render","forEach","removeChild","lastElementChild"],"version":3,"file":"index.02c04bf2.js.map"}