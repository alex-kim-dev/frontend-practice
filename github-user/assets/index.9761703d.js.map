{"version":3,"file":"index.9761703d.js","sources":["../../vite/modulepreload-polyfill","../../src/index.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\n\nconst $ = document.querySelector.bind(document);\nconst $$ = document.querySelectorAll.bind(document);\nconst $switch = $('.theme-switch');\nconst $form = $('.form');\nconst $submit = $('.form__submit');\nconst $user = $('.user');\nconst $feedback = $('.form__feedback');\nconst $avatar = $('.avatar');\nconst $name = $('.user__name');\nconst $login = $('.login');\nconst $joined = $('.user__joined');\nconst $bio = $('.user__bio');\nconst [$repos, $followers, $following] = $$('.meta__value');\nconst [$location, $website, $twitter, $company] = $$('.details__item');\n\nconst apiEndpoint = 'https://api.github.com/users/';\n\nconst themes = {\n  light: 'light',\n  dark: 'dark',\n};\n\nconst intialUserData = {\n  avatar: './images/avatar-octocat.png',\n  name: 'The Octocat',\n  login: 'octocat',\n  joined: 'Joined 25 Jan 2011',\n  bio: '',\n  meta: {\n    repos: 8,\n    followers: 3938,\n    following: 9,\n  },\n  details: {\n    location: 'San Francisco',\n    website: 'https://github.blog',\n    twitter: '',\n    company: '@github',\n  },\n};\n\nconst toggleAttr = (element, condition) => (attr, value) =>\n  element[condition ? 'setAttribute' : 'removeAttribute'](attr, value);\n\nconst toggleClass = (element, condition) => (cls) =>\n  element.classList[condition ? 'add' : 'remove'](cls);\n\nconst toggleMuted = (element, condition) =>\n  toggleClass(element, condition)('muted');\n\nconst formatUserData = (data) => ({\n  avatar: data.avatar_url,\n  name: data.name ?? data.login,\n  login: data.login, // without @\n  joined: 'Joined '.concat(\n    new Date(data.created_at).toLocaleDateString('en-UK', {\n      day: '2-digit',\n      month: 'short',\n      year: 'numeric',\n    }),\n  ),\n  bio: data.bio ?? '',\n  meta: {\n    repos: data.public_repos,\n    followers: data.followers,\n    following: data.following,\n  },\n  details: {\n    location: data.location ?? '',\n    website: data.blog ?? '',\n    twitter: data.twitter_username ?? '', // without @\n    company: data.company ?? '', // with @\n  },\n});\n\nconst render = {\n  theme: (theme) => {\n    const isDark = theme === themes.dark;\n    toggleAttr(document.body, isDark)('data-theme', themes.dark);\n    $switch.setAttribute('aria-checked', isDark);\n  },\n\n  isLoading: (isLoading) => {\n    toggleClass($submit, isLoading)('btn--loading');\n    toggleAttr($submit, isLoading)('disabled', '');\n\n    $user.setAttribute('aria-busy', isLoading);\n    toggleMuted($user, isLoading);\n  },\n\n  error: (error) => {\n    $feedback.textContent = (() => {\n      if (error?.cause?.status === 404) return 'No results';\n      if (error?.cause instanceof Response) return 'Error fetching data';\n      return error?.message ?? '';\n    })();\n  },\n\n  user: ({ avatar, name, login, joined, bio, meta, details }) => {\n    const { location, website, twitter, company } = details;\n\n    $avatar.setAttribute('src', '');\n    $avatar.setAttribute('src', avatar);\n\n    $name.textContent = name;\n\n    $login.setAttribute('href', `https://github.com/${login}`);\n    $login.textContent = '@'.concat(login);\n\n    $joined.textContent = joined;\n\n    $bio.textContent = bio || 'This profile has no bio';\n    toggleMuted($bio, !bio);\n\n    $repos.textContent = meta.repos;\n    $followers.textContent = meta.followers;\n    $following.textContent = meta.following;\n\n    $location.textContent = location || 'Not Available';\n    toggleMuted($location, !location);\n\n    $website.firstElementChild.setAttribute('href', website);\n    $website.firstElementChild.textContent = website;\n    toggleMuted($website, !website);\n\n    $twitter.firstElementChild.setAttribute(\n      'href',\n      `https://twitter.com/${twitter}`,\n    );\n    $twitter.firstElementChild.textContent = '@'.concat(twitter);\n    toggleMuted($twitter, !twitter);\n\n    $company.firstElementChild.setAttribute(\n      'href',\n      `https://github.com/${company?.slice(1)}`,\n    );\n    $company.firstElementChild.textContent = company;\n    toggleMuted($company, !company);\n  },\n};\n\nconst state = new Proxy(\n  Object.seal({\n    theme: themes.dark,\n    isLoading: false,\n    user: intialUserData,\n    error: null,\n  }),\n  {\n    set: (container, prop, value) => {\n      if (container[prop] !== value) {\n        container[prop] = value;\n        render[prop](value);\n      }\n      return true;\n    },\n  },\n);\n\nconst fetchUser = async (username) => {\n  if (!username) {\n    state.error = new Error('The field is empty');\n    return;\n  }\n\n  state.isLoading = true;\n  state.error = null;\n\n  try {\n    const response = await fetch(`${apiEndpoint}${username}`);\n    const { ok, status, statusText } = response;\n\n    if (!ok) {\n      const error = new Error(`${status}: ${statusText}`);\n      error.cause = response;\n      throw error;\n    }\n\n    state.user = formatUserData(await response.json());\n  } catch (error) {\n    state.error = error;\n  } finally {\n    state.isLoading = false;\n  }\n};\n\nconst handleThemeChange = ({ currentTarget }) => {\n  state.theme =\n    currentTarget.getAttribute('aria-checked') === 'true'\n      ? themes.light\n      : themes.dark;\n};\n\nconst handleSearchSubmit = (event) => {\n  event.preventDefault();\n\n  if (state.isLoading) return;\n\n  const username = new FormData(event.currentTarget).get('username').trim();\n\n  fetchUser(username);\n};\n\n$switch.addEventListener('click', handleThemeChange);\n$form.addEventListener('submit', handleSearchSubmit);\n\nconst prefersDark = window?.matchMedia('(prefers-color-scheme: dark)').matches;\nstate.theme = prefersDark ? themes.dark : themes.light;\n\nfetchUser('octocat');\n"],"names":[],"mappings":"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"}