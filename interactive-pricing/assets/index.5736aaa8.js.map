{"version":3,"file":"index.5736aaa8.js","sources":["../../vite/modulepreload-polyfill","../../src/index.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\n\nconst pricingData = [\n  { views: 1e4, price: 8 },\n  { views: 5e4, price: 12 },\n  { views: 1e5, price: 16 },\n  { views: 5e5, price: 24 },\n  { views: 1e6, price: 36 },\n];\n/** Yearly discount in percent */\nconst discount = 25;\n\nconst sliderPositionMin = 0;\nconst sliderPositionMax = pricingData.length - 1;\n\nconst $pricingWidget = document.getElementById('pricing-widget');\nconst $slider = $pricingWidget.querySelector('.slider');\nconst $bar = $pricingWidget.querySelector('.slider__bar');\nconst $thumb = $pricingWidget.querySelector('.slider__thumb');\nconst $views = $pricingWidget.querySelector('.pricing__views');\nconst $value = $pricingWidget.querySelector('.pricing__value');\nconst $switch = $pricingWidget.querySelector('.switch__checkbox');\n\n/**\n * Calculates the slider's thumb position, taking into account that the thumb moves within a range of the bar width minus the thumb width.\n * @arg {number} offset X coordinate relative to the left edge of the slider\n */\nconst getSliderPosition = (offset) =>\n  Math.round(\n    ((offset - $thumb.clientWidth / 2) /\n      ($bar.clientWidth - $thumb.clientWidth)) *\n      sliderPositionMax,\n  );\n\nconst priceFormatter = new Intl.NumberFormat('en', {\n  style: 'currency',\n  currency: 'USD',\n  minimumFractionDigits: 2,\n});\n\nconst viewsFormatter = new Intl.NumberFormat('en', {\n  notation: 'compact',\n});\n\n/** @arg {{ sliderPosition: number, yearlyBilling: boolean }} state */\nconst render = ({ sliderPosition, yearlyBilling }) => {\n  const { price, views } = pricingData[sliderPosition];\n  const viewsText = viewsFormatter.format(views).concat(' pageviews');\n\n  $views.textContent = viewsText;\n  $value.textContent = priceFormatter.format(\n    price * (yearlyBilling ? 1 - discount / 100 : 1),\n  );\n\n  $slider.style.setProperty('--position', sliderPosition);\n  $thumb.setAttribute('aria-valuenow', views);\n  $thumb.setAttribute('aria-valuetext', viewsText);\n};\n\nconst state = new Proxy(\n  Object.seal({\n    sliderPosition: Math.floor(sliderPositionMax / 2),\n    yearlyBilling: false,\n  }),\n  {\n    set: (container, prop, value, proxy) => {\n      switch (prop) {\n        case 'sliderPosition': {\n          const position = Math.min(\n            Math.max(value, sliderPositionMin),\n            sliderPositionMax,\n          );\n          if (container[prop] !== position) {\n            container[prop] = position;\n            render(proxy);\n          }\n          break;\n        }\n\n        case 'yearlyBilling': {\n          if (container[prop] !== value) {\n            container[prop] = value;\n            render(proxy);\n          }\n          break;\n        }\n\n        // no default\n      }\n\n      return true;\n    },\n  },\n);\n\n/** @arg {KeyboardEvent} event */\nconst handleSliderKeyDown = (event) => {\n  switch (event.key) {\n    case 'ArrowLeft':\n    case 'ArrowDown':\n      state.sliderPosition -= 1;\n      break;\n    case 'ArrowRight':\n    case 'ArrowUp':\n      state.sliderPosition += 1;\n      break;\n    case 'Home':\n      state.sliderPosition = sliderPositionMin;\n      break;\n    case 'End':\n      state.sliderPosition = sliderPositionMax;\n      break;\n    case 'PageUp':\n      state.sliderPosition += 2;\n      break;\n    case 'PageDown':\n      state.sliderPosition -= 2;\n      break;\n    default:\n      break;\n  }\n};\n\nconst handleSliderDrag = (e) => {\n  e.preventDefault();\n  e.stopPropagation();\n  $thumb.focus();\n  document.body.classList.add('dragging');\n\n  /** @arg {MouseEvent | TouchEvent} event */\n  const handleMouseMove = (event) => {\n    const { pageX } = event instanceof MouseEvent ? event : event.touches[0];\n    const { left } = $bar.getBoundingClientRect();\n    state.sliderPosition = getSliderPosition(pageX - left);\n  };\n\n  const handleMouseUp = () => {\n    document.body.classList.remove('dragging');\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('touchmove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    document.removeEventListener('touchend', handleMouseUp);\n  };\n\n  document.addEventListener('mousemove', handleMouseMove);\n  document.addEventListener('touchmove', handleMouseMove);\n  document.addEventListener('mouseup', handleMouseUp);\n  document.addEventListener('touchend', handleMouseUp);\n};\n\n/** @arg {MouseEvent} event */\nconst handleSliderClick = ({ offsetX }) => {\n  $thumb.focus();\n  state.sliderPosition = getSliderPosition(offsetX);\n};\n\n/** @arg {Event} event */\nconst handleSwitchChange = (event) => {\n  state.yearlyBilling = event.currentTarget.checked;\n};\n\n$thumb.addEventListener('keydown', handleSliderKeyDown);\n$thumb.addEventListener('mousedown', handleSliderDrag);\n$thumb.addEventListener('touchstart', handleSliderDrag);\n$bar.addEventListener('click', handleSliderClick);\n$switch.addEventListener('change', handleSwitchChange);\n"],"names":["relList","document","createElement","supports","link","querySelectorAll","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","href","p","pricingData","views","price","sliderPositionMax","length","$pricingWidget","getElementById","$slider","querySelector","$bar","$thumb","$views","$value","$switch","getSliderPosition","offset","Math","round","clientWidth","priceFormatter","Intl","NumberFormat","style","currency","minimumFractionDigits","viewsFormatter","notation","render","sliderPosition","yearlyBilling","viewsText","format","concat","textContent","setProperty","setAttribute","state","Proxy","Object","seal","floor","set","container","prop","value","proxy","position","min","max","handleSliderDrag","e","preventDefault","stopPropagation","focus","body","classList","add","handleMouseMove","event","pageX","MouseEvent","touches","left","getBoundingClientRect","handleMouseUp","remove","removeEventListener","addEventListener","key","offsetX","currentTarget","checked"],"mappings":"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"}