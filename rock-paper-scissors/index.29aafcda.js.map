{"mappings":"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","sources":["projects/rock-paper-scissors/src/js/_utils.js","projects/rock-paper-scissors/src/js/_modal.js","projects/rock-paper-scissors/src/js/script.js"],"sourcesContent":["export const $ = document.querySelector.bind(document);\n\nexport const $$ = document.querySelectorAll.bind(document);\n\nexport const animate = ($el, animation) =>\n  new Promise((resolve) => {\n    const removeAnimation = () => {\n      $el.classList.remove(animation);\n      $el.removeEventListener('animationend', removeAnimation);\n      resolve($el);\n    };\n\n    $el.classList.add(animation);\n    $el.addEventListener('animationend', removeAnimation);\n  });\n\nexport const delay = (duration = 0) =>\n  new Promise((resolve) => {\n    setTimeout(resolve, duration);\n  });\n\nexport const toggleDisplay = ($el) => {\n  $el.classList.toggle('hidden');\n};\n\nexport const genRandomNum = (min = 0, max = 1) =>\n  Math.floor(min + Math.random() * (max - min));\n\nexport const getSavedItem = (key) => {\n  try {\n    return localStorage.getItem(key);\n  } catch (err) {\n    if (err instanceof DOMException && err.message.includes('localStorage'))\n      return null;\n    throw err;\n  }\n};\n\nexport const saveItem = (key, value) => {\n  try {\n    localStorage.setItem(key, value);\n    return true;\n  } catch (err) {\n    if (err instanceof DOMException && err.message.includes('localStorage'))\n      return false;\n    throw err;\n  }\n};\n","const { $, animate, toggleDisplay } = require('./_utils');\n\nconst $overlay = $('.overlay');\nconst $rulesBtn = $('.rules');\nconst $closeModalBtn = $('.modal > button');\n\nconst hideModal = (event) => {\n  event.stopPropagation();\n  const { target } = event;\n\n  if (target === $overlay || $closeModalBtn.contains(target)) {\n    animate($overlay, 'fadeOut').then(toggleDisplay);\n  }\n};\n\nconst showModal = () => {\n  toggleDisplay($overlay);\n  animate($overlay, 'fadeIn');\n};\n\n$closeModalBtn.addEventListener('click', hideModal, true);\n$overlay.addEventListener('click', hideModal, true);\n$rulesBtn.addEventListener('click', showModal);\n","import './_modal';\nimport {\n  $,\n  $$,\n  animate,\n  delay,\n  toggleDisplay,\n  genRandomNum,\n  getSavedItem,\n  saveItem,\n} from './_utils';\n\nconst $playField = $('.playfield');\nconst $result = $('.result');\nconst $leftCol = $('.result > .col:nth-child(1) > .box');\nconst $rightCol = $('.result > .col:nth-child(2) > .box');\nconst $status = $('.status');\nconst $score = $('.score > div:nth-child(2)');\nconst $center = $('.center');\n\nconst savedScore = getSavedItem('score');\nif (savedScore === null)\n  // eslint-disable-next-line no-console\n  console.warn(\n    \"The score won't be saved between sessions as third party cookies are disabled in your browser.\",\n  );\n\nlet score = Number(savedScore) || 0;\nlet isGameInProgress = false;\n\n$score.textContent = score;\n\nconst newOptionElement = (className) => {\n  const $option = document.createElement('div');\n  $option.classList.add('option', className);\n\n  const $spanWithIcon = $(`button.option.${className} > span`).cloneNode(true);\n  $option.append($spanWithIcon);\n\n  return $option;\n};\n\n// 'beats' contains indexes of the options\nconst options = [\n  { name: 'Scissors', beats: [1, 3] },\n  { name: 'Paper', beats: [2, 4] },\n  { name: 'Rock', beats: [3, 0] },\n  { name: 'Lizard', beats: [4, 1] },\n  { name: 'Spock', beats: [0, 2] },\n].map((opt) => ({\n  ...opt,\n  $element: newOptionElement(opt.name.toLowerCase()),\n}));\n\nconst render = async (playerPick, housePick, isPlayerWon) => {\n  $leftCol.append(options[playerPick].$element);\n  await animate($playField, 'fadeOut');\n  toggleDisplay($playField);\n  await delay(300);\n\n  toggleDisplay($result);\n  await animate($result, 'fadeIn');\n  await delay(800);\n\n  $rightCol.append(options[housePick].$element);\n  await animate(options[housePick].$element, 'flip');\n  await delay(500);\n\n  (isPlayerWon ? $leftCol : $rightCol).classList.add('highlight');\n  await delay(1000);\n\n  $status.textContent = isPlayerWon ? 'You win' : 'You lose';\n  $result.classList.add('expanded');\n  await animate($center, 'expand');\n\n  animate($score, 'flip-scale');\n  await delay(300);\n  $score.textContent = score;\n};\n\nconst play = ({ currentTarget }) => {\n  if (isGameInProgress) return;\n  isGameInProgress = true;\n\n  const clickedOptName = currentTarget.getAttribute('aria-label');\n  const playerPick = options.findIndex(({ name }) => name === clickedOptName);\n\n  const random = genRandomNum(0, options.length - 1);\n  const housePick = options\n    .map((_, i) => i) // saving initial indexes\n    // filtering out the option already picked by a player\n    // & picking a random option from the rest\n    .filter((_, i) => i !== playerPick)[random];\n\n  const isPlayerWon = options[playerPick].beats.includes(housePick);\n\n  score += isPlayerWon ? 1 : -1;\n  saveItem('score', score);\n\n  render(playerPick, housePick, isPlayerWon);\n};\n\nconst newRound = async () => {\n  if (!isGameInProgress) return;\n  isGameInProgress = false;\n\n  await animate($result, 'fadeOut');\n  toggleDisplay($result);\n\n  toggleDisplay($playField);\n  animate($playField, 'fadeIn');\n\n  $('.highlight').classList.remove('highlight');\n\n  $result.classList.remove('expanded');\n\n  $leftCol.removeChild($leftCol.lastElementChild);\n  $rightCol.removeChild($rightCol.lastElementChild);\n\n  isGameInProgress = false;\n};\n\n$$('.playfield .option').forEach(($option) => {\n  $option.addEventListener('click', play);\n});\n\n$('.repeat').addEventListener('click', newRound);\n"],"names":["$d303568490185af2$export$4048ae5fe51d81b7","document","querySelector","bind","$d303568490185af2$export$abbe757b0bd7b188","querySelectorAll","$d303568490185af2$export$ad908fd2458f8d4","$el","animation","Promise","resolve","removeAnimation","classList","remove","removeEventListener","add","addEventListener","$d303568490185af2$export$5e699d9804ad8e3","duration","setTimeout","$d303568490185af2$export$e3e84a4a04a42eab","toggle","$92b158bbcf7a75b8$var$$overlay","$92b158bbcf7a75b8$require$$","$92b158bbcf7a75b8$var$$rulesBtn","$92b158bbcf7a75b8$var$$closeModalBtn","$92b158bbcf7a75b8$var$hideModal","event","stopPropagation","target","contains","$92b158bbcf7a75b8$require$animate","then","$92b158bbcf7a75b8$require$toggleDisplay","$a6d1c164ee3cc7c3$var$$playField","$a6d1c164ee3cc7c3$var$$result","$a6d1c164ee3cc7c3$var$$leftCol","$a6d1c164ee3cc7c3$var$$rightCol","$a6d1c164ee3cc7c3$var$$status","$a6d1c164ee3cc7c3$var$$score","$a6d1c164ee3cc7c3$var$$center","$a6d1c164ee3cc7c3$var$savedScore","key","localStorage","getItem","err","DOMException","message","includes","$d303568490185af2$export$15bfc0db514b7dd8","console","warn","$a6d1c164ee3cc7c3$var$score","Number","$a6d1c164ee3cc7c3$var$isGameInProgress","textContent","$a6d1c164ee3cc7c3$var$newOptionElement","className","$option","createElement","$spanWithIcon","cloneNode","append","$a6d1c164ee3cc7c3$var$options","name","beats","map","opt","$element","toLowerCase","$a6d1c164ee3cc7c3$var$play","currentTarget","clickedOptName","getAttribute","playerPick","findIndex","random","min","max","Math","floor","$d303568490185af2$export$67845517f416f9be","length","housePick","_","i","filter","isPlayerWon","value","setItem","$d303568490185af2$export$13b92d0ae6cb6fed","async","$a6d1c164ee3cc7c3$var$render","forEach","removeChild","lastElementChild"],"version":3,"file":"index.29aafcda.js.map"}